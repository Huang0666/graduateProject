# 3.2 模型训练数据策略

本研究采用渐进式的数据策略，通过三个阶段的数据处理和实验配置，逐步优化模型性能。每个阶段的数据处理策略和配置各有侧重，以验证不同数据处理方法对模型性能的影响。

## 3.2.1 数据处理策略概述

本研究设计了三种数据处理策略，分别针对不同的实验目标：

1. **基准策略**：采用小规模均衡数据集，建立性能基准
2. **质量增强策略**：引入评论质量权重，优先选择高质量样本
3. **全量数据策略**：保持原始数据分布，充分利用所有样本

## 3.2.2 数据集构建

### 3.2.2.1 基准数据集（V1）

基准数据集采用均衡采样策略，主要特点：
- 总样本量：1000条
- 采样方法：随机均衡采样
- 类别分布：四种情感类别（正面、负面、中性、无关）各250条
- 划分比例：训练集800条，验证集200条
- 目标：建立模型基准性能，验证方案可行性

### 3.2.2.2 质量增强数据集（V2）

在基准数据集的基础上，引入评论质量权重，特点：
- 总样本量：3000条
- 采样方法：基于质量权重的加权采样
- 权重计算：weight = 1 + log(1 + 点赞数) + log(1 + 回复数)
- 类别分布：四种情感类别各750条
- 划分比例：训练集2400条，验证集600条
- 目标：提升样本质量，优化模型性能

### 3.2.2.3 全量数据集（V3）

使用全部数据并保持原始分布，特点：
- 总样本量：6015条
- 采样方法：无采样，保持原始分布
- 类别分布：保持原始比例不变
- 划分比例：训练集4812条，验证集1203条
- 目标：充分利用数据，提升模型泛化能力

## 3.2.3 实验配置优化

### 3.2.3.1 基准实验配置（V1）

表1 实验配置参数对比

| 参数 | V1（基准实验） | V2（质量增强） | V3（全量数据） |
|------|--------------|--------------|--------------|
| batch_size | 16 | 32 | 64 |
| learning_rate | 2e-5 | 1e-5 | 5e-6 |
| epochs | 15 | 25 | 40 |
| warmup_ratio | 0.1 | 0.1 | 0.1 |
| weight_decay | 0.01 | 0.01 | 0.01 |
| gradient_accumulation_steps | 2 | 2 | 1 |

参数说明：
- batch_size：每批次处理的样本数量，影响训练速度和内存使用
- learning_rate：控制模型参数更新的步长，影响收敛速度和稳定性
- epochs：完整遍历训练集的次数，影响模型训练程度
- warmup_ratio：学习率预热比例，帮助模型在训练初期稳定收敛
- weight_decay：L2正则化系数，防止模型过拟合
- gradient_accumulation_steps：梯度累积步数，用于在显存不足时模拟更大的batch_size
```

## 3.2.4 数据处理流程

每个版本的数据处理都遵循统一的基本流程：
1. 数据读取：从原始CSV文件读取评论数据
2. 数据预处理：根据不同策略进行采样和处理
3. 数据集划分：按8:2比例划分训练集和验证集
4. 数据统计：生成详细的数据分布统计信息
5. 数据保存：将处理后的数据集保存为标准格式

所有处理后的数据集均采用统一的文件格式：
- 分隔符：竖线符号`|`
- 字段顺序：id|car_name|content|like_count|sub_comment_count|sentiment_analysis_results
- 情感标签：0（负面）、1（正面）、2（中性）、3（无关）

## 3.2.5 策略效果分析

三种数据策略各有优势：

1. 基准策略（V1）：
   - 优势：类别均衡，避免模型偏差
   - 局限：数据量较小，可能影响模型泛化能力

2. 质量增强策略（V2）：
   - 优势：提升样本质量，保持类别均衡
   - 创新：引入社交特征（点赞、评论数）作为质量指标

3. 全量数据策略（V3）：
   - 优势：充分利用数据，保持真实分布
   - 特点：通过配置优化解决类别不平衡问题

这种渐进式的数据策略设计，不仅能够逐步验证和优化模型性能，也为后续研究提供了可复现的实验基础。 